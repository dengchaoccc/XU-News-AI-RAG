# 个性化新闻智能知识库PRD

## 1. 引言

### 背景
随着信息爆炸时代的到来，用户面临海量新闻信息的筛选挑战。传统新闻聚合方式无法满足个性化需求，缺乏智能筛选和知识库管理功能。本项目旨在构建一个基于AI的个性化新闻智能知识库系统，通过自动化数据采集、智能分析和语义查询，为用户提供精准、高效的新闻信息服务。

### 目标用户
- 新闻工作者和媒体从业者：需要快速获取和整理行业相关新闻
- 知识工作者：需要构建个人或团队的知识库，进行信息管理和分析
- 普通用户：希望获取个性化新闻推荐和智能查询服务
- 企业用户：需要私有化部署，确保数据安全和合规性

### 产品愿景
打造一个完全本地化部署的AI驱动新闻知识库平台，实现从数据采集到智能分析的全流程自动化。通过n8n工作流引擎整合多种工具和服务，为用户提供安全、可控、高效的个性化新闻管理解决方案。

## 2. 用户故事与场景描述

### 用户故事1：新闻采集与入库
作为一名新闻工作者，我希望系统能够自动定时采集RSS和网页新闻，并智能分析后入库，这样我就可以专注于内容创作而非数据收集。

### 用户故事2：知识库管理
作为知识库管理员，我希望能够登录系统后查看、编辑和删除知识库内容，支持批量操作和元数据管理，以便高效维护知识库质量。

### 用户故事3：智能查询
作为信息消费者，我希望能够通过自然语言提问系统，如果知识库中有相关内容就优先返回，否则自动联网查询并生成答案。

### 用户故事4：数据分析
作为数据分析师，我希望系统能够自动生成知识库的关键词分析报告，帮助我了解热点趋势和内容分布。

### 典型使用场景
1. **每日新闻更新**：系统定时采集新闻，自动分类入库，并发送邮件通知用户
2. **研究查询**：用户登录后输入问题，系统先检索本地知识库，未找到则联网查询
3. **内容管理**：用户上传文档或数据，系统自动处理并添加到知识库
4. **分析报告**：系统定期生成关键词Top10等分析报告供用户查看

## 3. 产品范围与功能列表 (Scope & Features)

### 核心功能模块

#### 3.1 数据采集模块
- RSS源订阅和定时抓取
- 网页内容智能抓取（遵守爬虫规范）
- 智能代理工具集成
- 自动化数据预处理

#### 3.2 AI模型服务
- 本地大模型部署（基于Ollama，推荐qwen3）
- 嵌入模型配置（推荐all-MiniLM-L6-v2）
- 重排模型配置（推荐ms-marco-MiniLM-L-6-v2）
- 模型调用API接口

#### 3.3 知识库管理
- 结构化数据存储（MySQL）
- 向量数据存储（FAISS）
- 元数据管理（标签、来源、时间等）
- 数据导入导出功能

#### 3.4 用户系统
- 用户登录认证
- 权限管理
- 会话管理

#### 3.5 查询与分析
- 语义搜索功能
- 联网查询fallback
- 关键词聚类分析
- 数据可视化报告

#### 3.6 通知系统
- 邮件通知配置
- 自定义模板
- 触发条件设置

#### 3.7 工作流自动化
- n8n工作流设计
- 节点配置管理
- 工作流监控

### 功能优先级
- P0（核心）：数据采集、知识库存储、用户登录、语义查询
- P1（重要）：数据分析、通知系统、工作流自动化
- P2（扩展）：高级分析、多用户协作、外部API集成

## 4. 产品特定AI需求

### 4.1 模型需求
#### 功能需求
- **大语言模型**：支持文本生成、问答推理、内容摘要
- **嵌入模型**：将文本转换为向量表示，支持语义相似度计算
- **重排模型**：对检索结果进行相关性排序

#### 性能指标
- 响应时间：<2秒（本地查询），<5秒（联网查询）
- 准确率：语义匹配准确率>85%
- 并发处理：支持至少10个并发用户查询
- 模型大小：确保可在普通服务器上运行（推荐配置：16GB RAM以上）

### 4.2 数据需求
#### 数据来源
- RSS feeds（新闻源）
- 网页抓取（指定网站）
- 用户上传文档（PDF、Word、Excel等）
- API数据源（百度搜索等）

#### 数据数量
- 初始数据：1000+条新闻条目
- 日增量：50-200条（根据配置）
- 向量维度：384维（all-MiniLM-L6-v2标准）

#### 数据质量
- 去重率：>95%
- 完整性：标题、正文、来源、时间等字段完整
- 准确性：内容真实可靠，无明显错误

#### 数据标注
- 自动标注：基于规则和AI模型进行分类标注
- 手动标注：用户可编辑元数据标签

### 4.3 算法边界与可解释性
#### 算法边界
- 仅处理中文和英文内容
- 知识库查询优先本地数据
- 联网查询限制为前3条结果
- 不支持实时新闻推送（定时任务机制）

#### 可解释性
- 查询结果提供相似度分数
- 分析报告包含数据来源和计算方法
- 工作流执行日志可查看

### 4.4 评估标准
- **功能完整性**：所有P0功能正常运行
- **性能指标**：响应时间、准确率符合要求
- **用户体验**：界面友好，操作简便
- **系统稳定性**：99% uptime，错误率<1%

### 4.5 伦理与合规
- **数据隐私**：所有数据本地存储，不上传至第三方
- **合规要求**：符合GDPR和德国企业数据隐私标准
- **内容审核**：避免采集敏感或违法内容
- **透明度**：用户可查看数据来源和处理流程

## 5. 非功能性需求

### 性能需求
- **响应时间**：页面加载<3秒，查询响应<2秒
- **并发用户**：支持至少50个并发用户
- **数据处理**：每日处理1000+条新闻数据
- **存储容量**：支持至少10万条数据存储

### 安全需求
- **身份认证**：JWT或Spring Security实现
- **数据加密**：敏感数据加密存储
- **访问控制**：基于角色的权限管理
- **日志记录**：操作日志完整记录

### 可用性需求
- **系统可用性**：99.5% uptime
- **容错性**：单点故障不影响整体服务
- **可维护性**：模块化设计，便于维护和升级
- **可扩展性**：支持新数据源和功能扩展

### 兼容性需求
- **浏览器兼容**：Chrome、Firefox、Safari最新版本
- **操作系统**：macOS、Windows、Linux
- **数据库兼容**：MySQL 8.0+

## 6. n8n工作流专项需求

### 6.1 工作流场景设计
#### 数据采集工作流
- 定时触发 → RSS抓取 → 网页抓取 → 数据预处理 → 入库

#### 查询工作流
- 用户查询 → 知识库检索 → 相似度排序 → 返回结果
- 未匹配 → 联网查询 → 大模型处理 → 返回结果

#### 通知工作流
- 数据入库成功 → 邮件模板生成 → 发送通知

#### 分析工作流
- 定时触发 → 数据统计 → 聚类分析 → 生成报告

### 6.2 节点选型与配置要求
- **定时触发节点**：Schedule Trigger
- **数据抓取节点**：HTTP Request、RSS Feed
- **AI模型节点**：HTTP Request（调用Ollama）、自定义节点
- **数据库节点**：MySQL、FAISS自定义节点
- **通知节点**：Email Send
- **处理节点**：Function、Switch、Merge等

### 6.3 工作流触发条件与异常处理机制
#### 触发条件
- 定时任务：每日固定时间
- 事件触发：数据入库成功、用户查询
- 手动触发：管理员操作

#### 异常处理
- 网络异常：重试机制，最多3次
- 数据格式错误：跳过处理，记录日志
- 模型调用失败：降级处理，使用备用逻辑
- 数据库连接失败：告警通知，自动重连

### 6.4 私有化部署合规要求
- **部署环境**：本地服务器，不使用公有云服务
- **数据存储**：所有数据本地存储，不上传至第三方
- **网络隔离**：系统运行在内部网络，无外部访问
- **合规认证**：满足GDPR数据保护要求

## 7. 发布标准与衡量指标

### 发布标准
- **功能完成度**：100% P0功能实现，80% P1功能实现
- **测试覆盖率**：单元测试>80%，集成测试>70%
- **性能达标**：各项性能指标符合要求
- **文档完整性**：PRD、技术文档、用户手册齐全
- **安全审核**：通过安全漏洞扫描

### 衡量指标
- **用户满意度**：目标>4.0（5分制）
- **系统稳定性**：MTBF>720小时
- **查询准确率**：>85%
- **响应时间**：平均<2秒
- **数据处理效率**：每日处理量>1000条

## 8. 待定项与未来规划

### 待定项
- 具体UI设计稿确认
- 第三方API密钥管理方案
- 多语言支持范围
- 移动端适配方案

### 未来规划
- **Phase 2**：支持多模态数据（图片、视频）
- **Phase 3**：增加协作功能，支持团队知识库
- **Phase 4**：集成更多AI模型和分析工具
- **Phase 5**：开放API接口，支持第三方集成